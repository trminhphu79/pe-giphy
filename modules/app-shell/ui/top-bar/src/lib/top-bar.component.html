<div class="top-bar">
    <div class="top-bar__left">
        <pe-search class="search" [loading]="loading()" [suggestionItems]="suggestionItems()"
            (searchChanges)="searchChanges($event)" (keywordChanges)="keywordChanges($event)"></pe-search>
    </div>
    <div class="top-bar__menu-action">
        <ng-container *ngIf="userState.isLogin(); else noneLoginTemplate">
            <button class="upload-icon" appearance="secondary" iconStart="@tui.upload" size="m" tuiButton type="button">
                {{'BUTTON.ACTION.UPLOAD' | transloco}}
            </button>


            <button class="dropdown-button" #btnElement tuiButton tuiChevron tuiDropdownOpen type="button"
                [tuiDropdown]="actionDropdownTemplate" appearance="secondary">
                <div class="top-bar__avatar">
                    <img alt="avatar" [src]="userState.avatarUrl()" priority width="34" height="34" />
                </div>
                <div class="truncate"> {{userState.fullName()}}</div>
            </button>

            <ng-template #actionDropdownTemplate>
                <tui-data-list [ngStyle]="{'width': btnElement.offsetWidth + 'px' }" role="menu" appearance="secondary">
                    <a (click)="clickAction(item)" *ngFor="let item of items(); let i = index" role="menuitemradio"
                        tuiOption>
                        {{ item.label | transloco }}
                    </a>
                </tui-data-list>
            </ng-template>
        </ng-container>
    </div>
</div>

<ng-template #noneLoginTemplate>
    <div class="top-bar__register-action">
        <button (click)="login()" appearance="secondary" tuiButton type="button" size="m">
            {{'BUTTON.ACTION.LOGIN' | transloco}}
        </button>
        <button (click)="register()" appearance="secondary" tuiButton type="button" size="m">
            {{'BUTTON.ACTION.REGISTER' | transloco}}
        </button>
    </div>
</ng-template>